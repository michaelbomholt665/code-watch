%%{init: {'theme': 'base', 'themeVariables': {'textColor': '#000000', 'primaryTextColor': '#000000', 'lineColor': '#333333'}, 'flowchart': {'nodeSpacing': 80, 'rankSpacing': 110, 'curve': 'basis'}}}%%
flowchart LR
  circular_cmd_circular["circular/cmd/circular\n(0 funcs, 1 files)\n(d=13 in=0 out=1)"]
  circular_internal_core_app["circular/internal/core/app\n(21 funcs, 2 files)\n(d=8 in=3 out=7)"]
  circular_internal_core_config["circular/internal/core/config\n(29 funcs, 3 files)\n(d=1 in=4 out=1)\n(cx=101)"]
  circular_internal_core_watcher["circular/internal/core/watcher\n(5 funcs, 1 files)\n(d=0 in=1 out=0)"]
  circular_internal_engine_graph["circular/internal/engine/graph\n(37 funcs, 5 files)\n(d=4 in=5 out=2)"]
  circular_internal_engine_parser["circular/internal/engine/parser\n(45 funcs, 12 files)\n(d=3 in=5 out=3)"]
  circular_internal_engine_parser_extractors["circular/internal/engine/parser/extractors\n(2 funcs, 1 files)\n(d=4 in=0 out=1)"]
  circular_internal_engine_parser_grammar["circular/internal/engine/parser/grammar\n(6 funcs, 2 files)\n(d=2 in=1 out=1)"]
  circular_internal_engine_parser_registry["circular/internal/engine/parser/registry\n(4 funcs, 1 files)\n(d=1 in=2 out=1)"]
  circular_internal_engine_resolver["circular/internal/engine/resolver\n(13 funcs, 7 files)\n(d=5 in=3 out=3)"]
  circular_internal_engine_resolver_drivers["circular/internal/engine/resolver/drivers\n(17 funcs, 5 files)\n(d=0 in=1 out=0)"]
  circular_internal_mcp_adapters["circular/internal/mcp/adapters\n(11 funcs, 1 files)\n(d=9 in=4 out=3)"]
  circular_internal_mcp_contracts["circular/internal/mcp/contracts\n(33 funcs, 1 files)\n(d=0 in=10 out=0)"]
  circular_internal_mcp_openapi["circular/internal/mcp/openapi\n(3 funcs, 3 files)\n(d=1 in=1 out=1)"]
  circular_internal_mcp_registry["circular/internal/mcp/registry\n(6 funcs, 1 files)\n(d=0 in=1 out=0)"]
  circular_internal_mcp_runtime["circular/internal/mcp/runtime\n(21 funcs, 5 files)\n(d=11 in=1 out=13)"]
  circular_internal_mcp_schema["circular/internal/mcp/schema\n(2 funcs, 1 files)\n(d=1 in=1 out=1)"]
  circular_internal_mcp_tools_graph["circular/internal/mcp/tools/graph\n(1 funcs, 1 files)\n(d=10 in=1 out=2)"]
  circular_internal_mcp_tools_query["circular/internal/mcp/tools/query\n(4 funcs, 1 files)\n(d=10 in=1 out=2)"]
  circular_internal_mcp_tools_scan["circular/internal/mcp/tools/scan\n(1 funcs, 1 files)\n(d=10 in=1 out=2)"]
  circular_internal_mcp_tools_system["circular/internal/mcp/tools/system\n(7 funcs, 1 files)\n(d=1 in=1 out=1)"]
  circular_internal_mcp_transport["circular/internal/mcp/transport\n(6 funcs, 1 files)\n(d=2 in=1 out=2)"]
  circular_internal_mcp_validate["circular/internal/mcp/validate\n(2 funcs, 1 files)\n(d=1 in=1 out=1)\n(cx=81)"]
  circular_internal_shared_util["circular/internal/shared/util\n(5 funcs, 1 files)\n(d=0 in=7 out=0)"]
  circular_internal_shared_version["circular/internal/shared/version\n(0 funcs, 1 files)\n(d=0 in=2 out=0)"]
  circular_internal_ui_cli["circular/internal/ui/cli\n(7 funcs, 6 files)\n(d=12 in=1 out=9)\n(cx=87)"]
  circular_internal_ui_report["circular/internal/ui/report\n(8 funcs, 3 files)\n(d=7 in=2 out=2)"]
  circular_internal_ui_report_formats["circular/internal/ui/report/formats\n(13 funcs, 5 files)\n(d=6 in=1 out=3)\n(cx=123)"]
  __external_aggregate__["External/Stdlib\n(42 modules)"]

  classDef internalNode fill:#f7fbff,stroke:#4d6480,stroke-width:1px,color:#000000;
  class circular_cmd_circular,circular_internal_core_app,circular_internal_core_config,circular_internal_core_watcher,circular_internal_engine_graph,circular_internal_engine_parser,circular_internal_engine_parser_extractors,circular_internal_engine_parser_grammar,circular_internal_engine_parser_registry,circular_internal_engine_resolver,circular_internal_engine_resolver_drivers,circular_internal_mcp_adapters,circular_internal_mcp_contracts,circular_internal_mcp_openapi,circular_internal_mcp_registry,circular_internal_mcp_runtime,circular_internal_mcp_schema,circular_internal_mcp_tools_graph,circular_internal_mcp_tools_query,circular_internal_mcp_tools_scan,circular_internal_mcp_tools_system,circular_internal_mcp_transport,circular_internal_mcp_validate,circular_internal_shared_util,circular_internal_shared_version,circular_internal_ui_cli,circular_internal_ui_report,circular_internal_ui_report_formats internalNode;
  classDef externalNode fill:#efefef,stroke:#808080,stroke-dasharray:4 3,color:#000000;
  class __external_aggregate__ externalNode;
  classDef hotspotNode stroke:#8a4f00,stroke-width:2px,color:#000000;
  class circular_internal_core_config,circular_internal_mcp_validate,circular_internal_ui_cli,circular_internal_ui_report_formats hotspotNode;

  circular_cmd_circular --> circular_internal_ui_cli
  circular_internal_core_app --> circular_internal_core_config
  circular_internal_core_app --> circular_internal_core_watcher
  circular_internal_core_app --> circular_internal_engine_graph
  circular_internal_core_app --> circular_internal_engine_parser
  circular_internal_core_app --> circular_internal_engine_resolver
  circular_internal_core_app --> circular_internal_shared_util
  circular_internal_core_app --> circular_internal_ui_report
  circular_internal_core_config --> circular_internal_shared_version
  circular_internal_engine_graph --> circular_internal_engine_parser
  circular_internal_engine_graph --> circular_internal_shared_util
  circular_internal_engine_parser --> circular_internal_engine_parser_grammar
  circular_internal_engine_parser --> circular_internal_engine_parser_registry
  circular_internal_engine_parser --> circular_internal_shared_util
  circular_internal_engine_parser_extractors --> circular_internal_engine_parser
  circular_internal_engine_parser_grammar --> circular_internal_engine_parser_registry
  circular_internal_engine_parser_registry --> circular_internal_shared_util
  circular_internal_engine_resolver --> circular_internal_engine_graph
  circular_internal_engine_resolver --> circular_internal_engine_parser
  circular_internal_engine_resolver --> circular_internal_engine_resolver_drivers
  circular_internal_mcp_adapters --> circular_internal_core_app
  circular_internal_mcp_adapters --> circular_internal_core_config
  circular_internal_mcp_adapters --> circular_internal_mcp_contracts
  circular_internal_mcp_openapi --> circular_internal_mcp_contracts
  circular_internal_mcp_runtime --> circular_internal_core_app
  circular_internal_mcp_runtime --> circular_internal_core_config
  circular_internal_mcp_runtime --> circular_internal_mcp_adapters
  circular_internal_mcp_runtime --> circular_internal_mcp_contracts
  circular_internal_mcp_runtime --> circular_internal_mcp_openapi
  circular_internal_mcp_runtime --> circular_internal_mcp_registry
  circular_internal_mcp_runtime --> circular_internal_mcp_tools_graph
  circular_internal_mcp_runtime --> circular_internal_mcp_tools_query
  circular_internal_mcp_runtime --> circular_internal_mcp_tools_scan
  circular_internal_mcp_runtime --> circular_internal_mcp_tools_system
  circular_internal_mcp_runtime --> circular_internal_mcp_transport
  circular_internal_mcp_runtime --> circular_internal_mcp_validate
  circular_internal_mcp_runtime --> circular_internal_shared_util
  circular_internal_mcp_schema --> circular_internal_mcp_contracts
  circular_internal_mcp_tools_graph --> circular_internal_mcp_adapters
  circular_internal_mcp_tools_graph --> circular_internal_mcp_contracts
  circular_internal_mcp_tools_query --> circular_internal_mcp_adapters
  circular_internal_mcp_tools_query --> circular_internal_mcp_contracts
  circular_internal_mcp_tools_scan --> circular_internal_mcp_adapters
  circular_internal_mcp_tools_scan --> circular_internal_mcp_contracts
  circular_internal_mcp_tools_system --> circular_internal_mcp_contracts
  circular_internal_mcp_transport --> circular_internal_mcp_contracts
  circular_internal_mcp_transport --> circular_internal_mcp_schema
  circular_internal_mcp_validate --> circular_internal_mcp_contracts
  circular_internal_ui_cli --> circular_internal_core_app
  circular_internal_ui_cli --> circular_internal_core_config
  circular_internal_ui_cli --> circular_internal_engine_graph
  circular_internal_ui_cli --> circular_internal_engine_parser
  circular_internal_ui_cli --> circular_internal_engine_resolver
  circular_internal_ui_cli --> circular_internal_mcp_runtime
  circular_internal_ui_cli --> circular_internal_shared_util
  circular_internal_ui_cli --> circular_internal_shared_version
  circular_internal_ui_cli --> circular_internal_ui_report
  circular_internal_ui_report --> circular_internal_engine_graph
  circular_internal_ui_report --> circular_internal_ui_report_formats
  circular_internal_ui_report_formats --> circular_internal_engine_graph
  circular_internal_ui_report_formats --> circular_internal_engine_resolver
  circular_internal_ui_report_formats --> circular_internal_shared_util
  circular_cmd_circular -->|ext:1| __external_aggregate__
  circular_internal_core_app -->|ext:12| __external_aggregate__
  circular_internal_core_config -->|ext:6| __external_aggregate__
  circular_internal_core_watcher -->|ext:8| __external_aggregate__
  circular_internal_engine_graph -->|ext:6| __external_aggregate__
  circular_internal_engine_parser -->|ext:18| __external_aggregate__
  circular_internal_engine_parser_grammar -->|ext:7| __external_aggregate__
  circular_internal_engine_parser_registry -->|ext:4| __external_aggregate__
  circular_internal_engine_resolver -->|ext:2| __external_aggregate__
  circular_internal_engine_resolver_drivers -->|ext:5| __external_aggregate__
  circular_internal_mcp_adapters -->|ext:9| __external_aggregate__
  circular_internal_mcp_contracts -->|ext:1| __external_aggregate__
  circular_internal_mcp_openapi -->|ext:10| __external_aggregate__
  circular_internal_mcp_registry -->|ext:3| __external_aggregate__
  circular_internal_mcp_runtime -->|ext:10| __external_aggregate__
  circular_internal_mcp_tools_graph -->|ext:1| __external_aggregate__
  circular_internal_mcp_tools_query -->|ext:4| __external_aggregate__
  circular_internal_mcp_tools_scan -->|ext:1| __external_aggregate__
  circular_internal_mcp_tools_system -->|ext:1| __external_aggregate__
  circular_internal_mcp_transport -->|ext:8| __external_aggregate__
  circular_internal_mcp_validate -->|ext:3| __external_aggregate__
  circular_internal_shared_util -->|ext:5| __external_aggregate__
  circular_internal_ui_cli -->|ext:17| __external_aggregate__
  circular_internal_ui_report -->|ext:6| __external_aggregate__
  circular_internal_ui_report_formats -->|ext:5| __external_aggregate__

  linkStyle 62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86 stroke:#777777,stroke-dasharray:4 3;

  subgraph legend_info["Legend"]
    legend_metrics["Node line 1: module\nline 2: funcs/files\n(d=depth in=fan-in out=fan-out)\n(cx=complexity hotspot score)"]
    legend_edges["Edge labels: CYCLE=import cycle, VIOLATION=architecture rule violation, ext:N=external dependency count"]
  end
  classDef legendNode fill:#fff8dc,stroke:#b8a24c,stroke-width:1px,color:#000000;
  class legend_metrics,legend_edges legendNode;
