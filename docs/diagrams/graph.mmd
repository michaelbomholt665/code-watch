%%{init: {'flowchart': {'nodeSpacing': 80, 'rankSpacing': 110, 'curve': 'basis'}}}%%
flowchart LR
  circular_cmd_circular["circular/cmd/circular\n(0 funcs, 1 files)\n(d=6 in=0 out=1)"]
  circular_internal_app["circular/internal/app\n(31 funcs, 3 files)\n(d=4 in=1 out=6)"]
  circular_internal_cliapp["circular/internal/cliapp\n(11 funcs, 5 files)\n(d=5 in=1 out=3)"]
  circular_internal_config["circular/internal/config\n(18 funcs, 2 files)\n(d=0 in=2 out=0)\n(cx=101)"]
  circular_internal_graph["circular/internal/graph\n(49 funcs, 6 files)\n(d=1 in=3 out=1)"]
  circular_internal_output["circular/internal/output\n(28 funcs, 6 files)\n(d=3 in=1 out=3)\n(cx=123)"]
  circular_internal_parser["circular/internal/parser\n(21 funcs, 7 files)\n(d=0 in=4 out=0)\n(cx=80)"]
  circular_internal_resolver["circular/internal/resolver\n(25 funcs, 6 files)\n(d=2 in=3 out=2)"]
  circular_internal_watcher["circular/internal/watcher\n(7 funcs, 2 files)\n(d=0 in=1 out=0)"]
  __external_aggregate__["External/Stdlib\n(24 modules)"]

  classDef internalNode fill:#f7fbff,stroke:#4d6480,stroke-width:1px;
  class circular_cmd_circular,circular_internal_app,circular_internal_cliapp,circular_internal_config,circular_internal_graph,circular_internal_output,circular_internal_parser,circular_internal_resolver,circular_internal_watcher internalNode;
  classDef externalNode fill:#efefef,stroke:#808080,stroke-dasharray:4 3;
  class __external_aggregate__ externalNode;
  classDef hotspotNode stroke:#8a4f00,stroke-width:2px;
  class circular_internal_config,circular_internal_output,circular_internal_parser hotspotNode;

  circular_cmd_circular --> circular_internal_cliapp
  circular_internal_app --> circular_internal_config
  circular_internal_app --> circular_internal_graph
  circular_internal_app --> circular_internal_output
  circular_internal_app --> circular_internal_parser
  circular_internal_app --> circular_internal_resolver
  circular_internal_app --> circular_internal_watcher
  circular_internal_cliapp --> circular_internal_app
  circular_internal_cliapp --> circular_internal_config
  circular_internal_cliapp --> circular_internal_resolver
  circular_internal_graph --> circular_internal_parser
  circular_internal_output --> circular_internal_graph
  circular_internal_output --> circular_internal_parser
  circular_internal_output --> circular_internal_resolver
  circular_internal_resolver --> circular_internal_graph
  circular_internal_resolver --> circular_internal_parser
  circular_cmd_circular -->|ext:1| __external_aggregate__
  circular_internal_app -->|ext:11| __external_aggregate__
  circular_internal_cliapp -->|ext:11| __external_aggregate__
  circular_internal_config -->|ext:7| __external_aggregate__
  circular_internal_graph -->|ext:8| __external_aggregate__
  circular_internal_output -->|ext:7| __external_aggregate__
  circular_internal_parser -->|ext:11| __external_aggregate__
  circular_internal_resolver -->|ext:7| __external_aggregate__
  circular_internal_watcher -->|ext:10| __external_aggregate__

  linkStyle 16,17,18,19,20,21,22,23,24 stroke:#777777,stroke-dasharray:4 3;

  subgraph legend_info["Legend"]
    legend_metrics["Node line 1: module\nline 2: funcs/files\n(d=depth in=fan-in out=fan-out)\n(cx=complexity hotspot score)"]
    legend_edges["Edge labels: CYCLE=import cycle, VIOLATION=architecture rule violation, ext:N=external dependency count"]
  end
  classDef legendNode fill:#fff8dc,stroke:#b8a24c,stroke-width:1px;
  class legend_metrics,legend_edges legendNode;
